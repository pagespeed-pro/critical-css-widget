/** 
 * Critical CSS Widget
 * @link https://github.com/o10n-x/critical-css-widget
 */
!function(h){function v(){function a(l){return l.reduce(function(d,l){d.push(b(l));var q=l.children,c,m=[];for(c=0;c<q.length;c++)m[c]=q[c];return d.concat(a(m))},[])}function b(a){var d,b=document.styleSheets,q=[];a.matches=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector;for(var c in b){var m=b[c].rules||b[c].cssRules,e;for(e in m){d=!!m[e].selectorText&&m[e].selectorText.split(" ").map(function(a){return!!a&&a.split(/(:|::)/)[0]}).join(" ");try{a.matches(d)&&
q.push(m[e])}catch(g){}}}return q}var f=[document.body];return f.outerHTML,function(a){function d(a,c){return c.filter(function(c){return c.b===a})}var b=[];return a.forEach(function(a){a.forEach(function(a){var c;c=a.selectorText;var e=d(c,b);c=0<e.length?e[0]:{b:c,c:{}};for(e=0;e<a.style.length;e++){var g=a.style[e];c.c[g]=a.style.getPropertyValue(g)}0===d(c.b,b).length&&b.push(c)})}),b}(a(f)).reduce(function(a,b){return a+=b.b+" {\n",a+=Object.keys(b.c).reduce(function(a,d){return a.push("  "+
d+": "+b.c[d]+";"),a},[]).join("\n"),a+="\n}\n"},"")}function w(a){function b(a){var c=a.parentStyleSheet.href;c||(n++,c="inline");0==!!d[c]&&(d[c]={media:a.parentStyleSheet.media,a:{}});0==!!d[c].a[a.selectorText]&&(d[c].a[a.selectorText]={});for(var b=a.style.cssText.split(/;(?![A-Za-z0-9])/),e=0;e<b.length;e++)if(0!=!!b[e]){var g=b[e].split(": ");g[0]=g[0].trim();g[1]=g[1].trim();d[c].a[a.selectorText][g[0]]=g[1]}}var f=document,l={},d={},n=0;this.f=function(){var a,c,b,e="",g=console&&console.groupCollapsed,
r=[];console.clear&&console.clear();g&&(console.log("%cSimple Critical CSS Extraction","font-size:24px;font-weight:bold"),console.log("For professional Critical CSS generators, see https://github.com/addyosmani/critical-path-css-tools"));for(var f in d){g&&(b="inline"===f?"Inline":"File: "+f,console.groupCollapsed(b),a="");if(r.push([f,e.split(/\r\n|\r|\n/).length]),e+="/**\n * @file "+f,d[f].media&&(1<d[f].media.length||"all"!==d[f].media[0])){c=[];for(var l=0;l<d[f].media.length;l++)d[f].media[l]&&
c.push(d[f].media[l]);0<c.length&&(e+="\n * @media "+c.join(" "))}e+="\n */\n";for(k in d[f].a){c=k+" { ";for(var n in d[f].a[k])c+=n+": "+d[f].a[k][n]+"; ";e+=c+="}\n";g&&(a+=c)}e+="\n";g&&(console.log(a),console.groupEnd())}return g?console.groupCollapsed("All Extracted Critical CSS ("+t(e.length)+")"):console.log("%cAll:","font-weight:bold"),console.log(e),g&&console.groupEnd(),[e,r]};(function(){for(var d=a.innerHeight,c=f.createTreeWalker(f,NodeFilter.SHOW_ELEMENT,function(){return NodeFilter.FILTER_ACCEPT},
!0);c.nextNode();){var m=c.currentNode;if(m.getBoundingClientRect().top<d||l.h)if(m=a.getMatchedCSSRules(m))for(var e=0;e<m.length;e++)b(m[e])}})()}function t(a){var b=Math.floor(Math.log(a)/Math.log(1024));return 1*(a/Math.pow(1024,b)).toFixed(2)+" "+["B","kB","MB"][b]}!function(a,b){b.getMatchedCSSRules=a()}(function(){function a(a,b){var d=a.matchesSelector||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector;if(d)try{return d.call(a,b)}catch(q){}else for(var d=a.ownerDocument.querySelectorAll(b),
f=d.length;f&&f--;)if(d[f]===a)return!0;return!1}function b(b){var f,d,n,q,c,m=[],e=b.ownerDocument.styleSheets,g=e.length;if(1===b.nodeType)for(;g&&g--;)for(f=(d=e[g].cssRules||e[g].rules).length;f&&f--;)if((c=d[f])instanceof CSSStyleRule&&a(b,c.selectorText))m.push(c);else if(c instanceof CSSMediaRule&&h.matchMedia(c.media.mediaText).matches)for(q=(n=c.cssRules||c.rules).length;q&&q--;)(c=n[q])instanceof CSSStyleRule&&a(b,c.selectorText)&&m.push(c);return m}return function(){return h.getMatchedCSSRules?
h.getMatchedCSSRules:b}}(),this);var u=u||function(a){if(!(void 0===a||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var b=a.document.createElementNS("http://www.w3.org/1999/xhtml","a"),f="download"in b,l=/constructor/i.test(a.HTMLElement)||a.g,d=/CriOS\/[\d]+/.test(navigator.userAgent),n=function(b){(a.setImmediate||a.setTimeout)(function(){throw b;},0)},q=function(b){setTimeout(function(){"string"==typeof b?(a.URL||a.webkitURL||a).revokeObjectURL(b):b.remove()},4E4)},
c=function(a){for(var b=["writestart","progress","write","writeend"],c=(b=[].concat(b)).length;c--;){var d=a["on"+b[c]];if("function"==typeof d)try{d.call(a,a)}catch(p){n(p)}}},m=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a},e=function(e,g,n){n||(e=m(e));var h,p=this,r="application/octet-stream"===e.type;if(p.readyState=p.INIT,f)return h=(a.URL||a.webkitURL||a).createObjectURL(e),
void setTimeout(function(){b.href=h;b.download=g;var a=new MouseEvent("click");b.dispatchEvent(a);c(p);q(h);p.readyState=p.DONE});!function(){if((d||r&&l)&&a.FileReader){var b=new FileReader;return b.onloadend=function(){var e=d?b.result:b.result.replace(/^data:[^;]*;/,"data:attachment/file;");a.open(e,"_blank")||(a.location.href=e);p.readyState=p.DONE;c(p)},b.readAsDataURL(e),void(p.readyState=p.INIT)}h||(h=(a.URL||a.webkitURL||a).createObjectURL(e));r?a.location.href=h:a.open(h,"_blank")||(a.location.href=
h);p.readyState=p.DONE;c(p);q(h)}()},g=e.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(a,b,c){return b=b||a.name||"download",c||(a=m(a)),navigator.msSaveOrOpenBlob(a,b)}:(g.abort=function(){},g.readyState=g.INIT=0,g.WRITING=1,g.DONE=2,g.error=g.onwritestart=g.onprogress=g.onwrite=g.onabort=g.onerror=g.onwriteend=null,function(a,b,c){return new e(a,b||a.name||"download",c)})}}(h);h.extractCriticalCSS=function(a){for(var b=(new w(h)).f(),f=b[0],b=b[1],l="/**\n * Simple Critical CSS\n *\n * @url "+
document.location.href+"\n * @title "+document.title+"\n * @viewport "+h.innerWidth+"x"+h.innerHeight+"\n * @size "+t(f.length)+"\n *\n * Extracted using the Page Speed Optimization CSS extract widget.\n * @link https://wordpress.org/plugins/above-the-fold-optimization/\n * @source https://github.com/optimalisatie/above-the-fold-optimization/blob/master/admin/js/css-extract-widget.js (.min.js)\n *\n * For professional Critical CSS generators see https://github.com/addyosmani/critical-path-css-tools\n *\n * @sources",
d=l.split(/\r\n|\r|\n/).length,d=d+(b.length+3),n=0;n<b.length;n++)l+="\n * @line "+(b[n][1]+d)+"\t @file "+b[n][0];if(l+="\n */\n\n",l+=f,a)return a(l);a=new Blob([l],{type:"text/css;charset=utf-8"});f=(f=h.location.pathname)&&"/"!==f&&-1!==f.indexOf("/")?"-"+f.replace(/\/$/,"").split("/").pop():"-front-page";u(a,"critical-css"+f+".css")};h.extractFullCSS=function(a){var b=v(),f=!!a||!0;if(console.clear&&console.clear(),console.log("%cFull CSS Extraction","font-size:24px;font-weight:bold"),console.groupCollapsed&&
console.groupCollapsed("Extracted Full CSS ("+t(b.length)+")"),console.log(b),console.groupCollapsed&&console.groupEnd(),f){b="/**\n * Full CSS\n *\n * @url "+document.location.href+"\n * @title "+document.title+"\n * @size "+t(b.length)+"\n *\n * Extracted using the Page Speed Optimization CSS extract widget.\n * @link https://wordpress.org/plugins/above-the-fold-optimization/\n * @source https://github.com/optimalisatie/above-the-fold-optimization/blob/master/admin/js/css-extract-widget.js (.min.js)\n */\n\n"+
b;if(a)return a(b);a=new Blob([b],{type:"text/css;charset=utf-8"});b=(b=h.location.pathname)&&"/"!==b&&-1!==b.indexOf("/")?"-"+b.replace(/\/$/,"").split("/").pop():"-front-page";u(a,"full-css"+b+".css")}else alert("Your browser does not support javascript based file download. The full CSS is printed in the console.")}}(window);
